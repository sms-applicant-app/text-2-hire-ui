<ion-header>
  <ion-toolbar>
    <ion-title>My Profile</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="offset-md-3 col-lg-6 col-sm-12 mt-4">
    <button mat-stroked-button (click)="backToStore()">
      <ion-icon name="chevron-back-outline"></ion-icon>
      Back
    </button>
    <form [formGroup]="formEditUser" class="mt-4" *ngIf="!isChangePass">
      <div class="form-group">
        <ion-item lines="full" class="mb-3">
          <ion-label position="stacked" required>Full Name</ion-label>
          <ion-input clearInput type="text" [disabled]="!isEditForm" formControlName="fullName" required></ion-input>
          <span class="field-err" *ngIf="formEditUser.controls.fullName.errors?.required && (formEditUser.controls.fullName.dirty || formEditUser.controls.fullName.touched)">Full name is required</span>
        </ion-item>
        <ion-item lines="full" class="mb-3">
          <ion-label position="stacked" required>Email</ion-label>
          <ion-input clearInput type="text" [disabled]="true" [value]="userEmail"></ion-input>
          <!-- <span class="field-err" *ngIf="formEditUser.controls.email.errors?.required && (formEditUser.controls.email.dirty || formEditUser.controls.email.touched)">Email is required</span> -->
          <!-- <span class="field-err" *ngIf="formEditUser.controls.email.hasError('invalidEmail')">Invalid email address</span> -->
        </ion-item>
        <ion-item lines="full" class="mb-3">
          <ion-label position="stacked" required>Phone Number</ion-label>
          <ion-input clearInput type="phoneNumber" [disabled]="!isEditForm" formControlName="phoneNumber"></ion-input>
        <span class="field-err" *ngIf="formEditUser.controls.phoneNumber.errors?.required && (formEditUser.controls.phoneNumber.dirty || formEditUser.controls.phoneNumber.touched)">Phone is required</span>
      </ion-item>
        <!-- TODO if user is hiring manager they need to be able ta edit thier calendar link-->



      </div>
      <div class="d-flex flex-row align-items-center">
        <button class="mt-3 btn-large" (click)="changeModeEdit()" mat-raised-button color="primary" [disabled]="isEditForm">Edit</button>
        <button class="mt-3 btn-large mr-3 ml-3" mat-stroked-button color="primary" [disabled]="!isEditForm" (click)="update()">
          Update Profile
          <ion-spinner *ngIf="isCalling"></ion-spinner>
        </button>
        <!-- <button class="mt-3 btn-large" (click)="changePassword()" mat-raised-button color="primary">Change password</button> -->
      </div>
    </form>
    <form [formGroup]="formChangePass" class="mt-4" *ngIf="isChangePass">
      <div class="form-group">
        <ion-item lines="full" class="mb-3">
          <ion-label position="stacked" required>New Password</ion-label>
          <ion-input clearInput type="text" formControlName="newPassWord"></ion-input>
          <span class="field-err" *ngIf="formChangePass.controls.newPassWord.errors?.required && (formChangePass.controls.newPassWord.dirty || formChangePass.controls.newPassWord.touched)">Password is required</span>
        </ion-item>
        <ion-item lines="full" class="mb-3">
          <ion-label position="stacked" required>Confirm New Password</ion-label>
          <ion-input clearInput type="password" formControlName="confirmPassword"></ion-input>
          <span class="field-err" *ngIf="formChangePass.controls.confirmPassword.errors?.required && (formChangePass.controls.confirmPassword.dirty || formChangePass.controls.confirmPassword.touched)">Confirm Password is required</span>
          <span class="field-err" *ngIf="formChangePass.controls.confirmPassword.hasError('mismatchedPasswords')">Passwords do not match</span>
        </ion-item>
      </div>
      <div class="d-flex flex-row align-items-center">
        <button class="mt-3 btn-large" (click)="backProfile()" mat-raised-button color="primary">Back Profile</button>
        <button class="mt-3 btn-large mr-3 ml-3" mat-stroked-button color="primary" [disabled]="!isEditForm" (click)="update()">
          Update Password
          <ion-spinner *ngIf="isCalling"></ion-spinner>
        </button>
      </div>
    </form>


  </div>

</ion-content>
